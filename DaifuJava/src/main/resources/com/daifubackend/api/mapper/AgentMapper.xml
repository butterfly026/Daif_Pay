<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.daifubackend.api.mapper.AgentMapper">



    <select id="list" resultType="com.daifubackend.api.pojo.Agent">
        select * from wd_agents
        <where>
            <if test="username!=null and username!=''">
                username like concat('%',#{username},'%')
            </if>

            <if test="state!=null">
                and state = #{state}
            </if>

            <if test="merchant_id!=null and merchant_id!=null">
                and merchant_id = #{merchant_id}
            </if>

        </where>
        order by updated_at desc
    </select>

    <!--批量删除员工信息-->
    <delete id="delete">
        delete from wd_agents where uid = #{uid}
    </delete>

    <!--更新员工信息-->
    <update id="update">

        UPDATE wd_agents
        <set>
            <if test="username!=null and username!=''">username=#{username},</if>
            <if test="password!=null and password!=''">password=#{password},</if>
            <if test="google!=null and google!=''">google=#{google},</if>
            <if test="created_at!=null">created_at=#{created_at},</if>
            <if test="created_by_uid!=null">created_by_uid=#{created_by_uid},</if>
            <if test="created_by_name!=null and created_by_name!=''">created_by_name=#{created_by_name},</if>
            <if test="updated_at!=null">updated_at=#{updated_at},</if>
            <if test="updated_ip!=null and updated_ip!=''">updated_ip=#{updated_ip},</if>
            <if test="isadmin!=null">isadmin=#{isadmin},</if>
            <if test="state!=null">state=#{state},</if>
        </set>
        WHERE uid=#{uid};
    </update>
</mapper>